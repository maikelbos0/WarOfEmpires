function DataGridViewMetaData(n,t,i,r,u){this.sortColumn=n;this.sortDescending=!!t;this.totalRows=isNaN(i)||i<0?0:parseInt(i);this.rowsPerPage=isNaN(r)||r<0?0:parseInt(r);this.page=isNaN(u)||u<0?0:parseInt(u);this.totalPages=Math.ceil(i/r);this.page>=this.totalPages&&(this.page=Math.max(this.totalPages-1,0))}(function(n){function t(t,r){let u=this,f=0;this.element=t;this.options=r;this.data=[];this.allowColumnResize=this.options.allowColumnResize(this.element);this.headerResizeState={dragging:!1};this.allowColumnMove=this.options.allowColumnMove(this.element);this.headerMoveState={dragging:!1};this.allowSelect=this.options.allowSelect(this.element);this.isMultiselect=this.allowSelect&&this.options.isMultiselect(this.element);this.selectState={selecting:!1,dragging:!1};this.metaData=this.options.getMetaData(this.element);this.elementClass="datagridview-"+Math.random().toString().replace(".","");this.element.addClass("datagridview");this.element.addClass(this.elementClass);this.element.children().hide();this.header=this.createElement("<div>","datagridview-header",this.options.getHeaderAttributes());this.body=this.createElement("<div>","datagridview-body",this.options.getBodyAttributes());this.rows=n(!1);this.contentContainer=this.createElement("<div>","datagridview-content-container",this.options.getContentContainerAttributes()).toggleClass("datagridview-container-multiselect",this.isMultiselect).append(this.header,this.body);this.footer=this.createElement("<div>","datagridview-footer",this.options.getFooterAttributes());this.footerPlugins=this.options.getFooterPlugins(this.element);this.sortToggle=this.createElement("<div>","datagridview-sort-toggle",this.options.getSortToggleAttributes());this.element.append(this.contentContainer,this.footer);this.style=this.createElement("<style>",null,this.options.getStyleAttributes(),{type:"text/css"});n("body").append(this.style);this.options.columns.forEach(function(t){t.id=Math.random().toString().replace(".","");t.columnClass="datagridview-column-"+t.id;t.width=isNaN(t.width)||t.width<=0?10:parseFloat(t.width);t.defaultWidth=t.width;t.visible=t.visible!==!1;t.index=f++;n.isFunction(t.renderer)||(t.renderer=null);let i=u.createElement("<div>","datagridview-header-cell",u.options.getHeaderCellAttributes()).addClass(t.columnClass).toggleClass("datagridview-header-cell-sortable",t.sortable!==!1).text(t.header||t.data).attr("title",t.header||t.data).data("id",t.id).data("column",t.data).data("sort-column",t.sortData||t.data);t.class&&i.addClass(t.class);u.allowColumnResize&&i.prepend(u.createElement("<div>","datagridview-header-drag",u.options.getHeaderDragAttributes()));u.header.append(i)});this.headerCells=this.header.children(".datagridview-header-cell");this.setColumnStyle();this.displaySortOrder();this.displayFooters();this.header.on("mouseup","div.datagridview-header-cell-sortable",this,i.sort);if(this.allowColumnResize){this.header.on("mousedown","div.datagridview-header-drag",this,i.columnResizeStart);n(document).on("mousemove",this,i.columnResize);n(document).on("mouseup",this,i.columnResizeEnd)}if(this.allowColumnMove){this.header.on("mousedown","div.datagridview-header-cell",this,i.columnMoveStart);n(document).on("mousemove",this,i.columnMove);n(document).on("mouseup",this,i.columnMoveEnd)}if(this.allowSelect){this.element.on("mousedown","div.datagridview-row",this,i.rowSelectStart);this.element.on("mouseenter","div.datagridview-row",this,i.rowSelect);this.element.on("mouseup","div.datagridview-row",this,i.rowSelectEnd)}}n.fn.datagridview=function(i,r){return n.isFunction(i)&&(r=i,i=null),n(this).each(function(){let u=n(this).data("datagridview");if(!n(this).data("datagridview")){if(i&&i.columns)if(n.isArray(i.columns)){if(!i.columns.every(function(n){return!!n.data}))throw'datagridview error: expected each item in option "columns" to have property "data"';}else throw'datagridview error: expected option "columns" to be an array';else throw'datagridview error: expected required option "columns"';let r=n.extend({},n.fn.datagridview.defaults,i);u=new t(n(this),r);n(this).data("datagridview",u)}n.isFunction(r)&&r.bind(u)(u)})};n.fn.datagridview.defaults={getMetaData:function(){return new DataGridViewMetaData(null,!1,0,1,0)},getFooterPlugins:function(){return[n.fn.datagridview.footerPlugins.prevNext,n.fn.datagridview.footerPlugins.pageInput,n.fn.datagridview.footerPlugins.pageSizeInput,n.fn.datagridview.footerPlugins.displayFull]},allowColumnResize:function(t){return n(t).data("column-resize")!==undefined&&n(t).data("column-resize")!=!1},allowColumnMove:function(t){return n(t).data("column-move")!==undefined&&n(t).data("column-move")!=!1},allowSelect:function(t){return n(t).data("select")!==undefined&&n(t).data("select")!=!1},isMultiselect:function(t){return n(t).data("multiselect")!==undefined&&n(t).data("multiselect")!=!1},getContentContainerAttributes:function(){return{}},getHeaderAttributes:function(){return{}},getSortToggleAttributes:function(){return{}},getHeaderCellAttributes:function(){return{}},getHeaderDragAttributes:function(){return{}},getHeaderMoveIndicatorAttributes:function(){return{}},getHeaderMoveTitleAttributes:function(){return{}},getBodyAttributes:function(){return{}},getRowAttributes:function(){return{}},getCellAttributes:function(){return{}},getFooterAttributes:function(){return{}},getFooterElementAttributes:function(){return{}},getStyleAttributes:function(){return{}}};n.fn.datagridview.footerPlugins={displayBasic:function(t,i){n(t).append(n("<div>").text("Page "+(i.page+1)+" of "+i.totalPages))},displayFull:function(t,i){let r=i.page*i.rowsPerPage+1,u=(i.page+1)*i.rowsPerPage;n(t).append(n("<div>").text("Page "+(i.page+1)+" of "+i.totalPages+", rows "+r+" to "+u+" of "+i.totalRows))},prevNext:function(t,i,r){let u=n("<button>").addClass("datagridview-paging-first").text("|<").click(function(){r.initiatePaging(0,i.rowsPerPage)}).prop("disabled",i.page<=0),f=n("<button>").addClass("datagridview-paging-prev").text("<").click(function(){r.initiatePaging(i.page-1,i.rowsPerPage)}).prop("disabled",i.page<=0);n(t).append(u,f);for(let u=Math.max(0,i.page-4);u<Math.min(i.totalPages,i.page+5);u++){let f=u;n(t).append(n("<button>").addClass("datagridview-paging-page").text(f+1).click(function(){r.initiatePaging(f,i.rowsPerPage)}).prop("disabled",i.page===f))}let e=n("<button>").addClass("datagridview-paging-next").text(">").click(function(){r.initiatePaging(i.page+1,i.rowsPerPage)}).prop("disabled",i.page>=i.totalPages-1),o=n("<button>").addClass("datagridview-paging-last").text(">|").click(function(){r.initiatePaging(i.totalPages-1,i.rowsPerPage)}).prop("disabled",i.page>=i.totalPages-1);n(t).append(e,o)},pageInput:function(t,i,r){let u=n("<input>",{type:"text"}).addClass("datagridview-paging-page").val(i.page+1),f=n("<span>").addClass("datagridview-paging-page-label").text("Page: "),e=n("<button>").addClass("datagridview-paging-go").text("Go").click(function(){r.initiatePaging(u.val()-1,i.rowsPerPage)});n(t).append(f,u,e)},pageSizeInput:function(t,i,r){let u=n("<input>",{type:"text"}).addClass("datagridview-paging-page-size").val(i.rowsPerPage),f=n("<span>").addClass("datagridview-paging-page-size-label").text("Page size: "),e=n("<button>").addClass("datagridview-paging-go").text("Go").click(function(){r.initiatePaging(i.page,u.val())});n(t).append(f,u,e)}};t.prototype.setColumnStyle=function(){let n="",t=this.options.columns.filter(function(n){return n.visible}).reduce(function(n,t){return n+t.width},0);t>100&&(n="."+this.elementClass+" div.datagridview-header, ."+this.elementClass+" div.datagridview-body { width: "+t+"%; }\n");this.style.html(this.options.columns.reduce(function(n,t){return t.visible?n+"."+t.columnClass+"{ flex-grow: "+t.width+"; order: "+t.index+"; }\n":n+"."+t.columnClass+"{ display: none; }\n"},n))};t.prototype.populate=function(n,t){let i=this.createElement("<div>","datagridview-body",this.options.getBodyAttributes());for(let n=0;n<t.length;n++){let r=t[n],u=this.createElement("<div>","datagridview-row",this.options.getRowAttributes());for(let n=0;n<this.options.columns.length;n++){let t=this.options.columns[n],i=this.createElement("<div>",t.columnClass,this.options.getCellAttributes());t.class&&i.addClass(t.class);t.renderer?t.renderer(i,r[t.data],r):i.text(r[t.data]||"").attr("title",r[t.data]||"");u.append(i)}i.append(u)}this.body.replaceWith(i);this.body=i;this.rows=i.children(".datagridview-row");this.data=t;this.metaData=n instanceof DataGridViewMetaData?n:n?new DataGridViewMetaData(n.sortColumn,n.sortDescending,n.totalRows||this.data.length,n.rowsPerPage||this.data.length,n.page||0):new DataGridViewMetaData(this.metaData.sortColumn,this.metaData.sortDescending,this.data.length,this.data.length,0);this.displaySortOrder();this.displayFooters()};t.prototype.createElement=function(t,i){let r=n.extend.apply({},Array.prototype.slice.call(arguments,2));return n(t,r).addClass(i)};t.prototype.remove=function(){this.element.removeClass("datagridview");this.element.removeClass(this.elementClass);this.element.children().show();this.contentContainer.remove();this.footer.remove();this.style.remove()};t.prototype.getMetaData=function(){return this.metaData.clone()};t.prototype.displaySortOrder=function(){let i=this,t=this.headerCells.filter(function(){return n(this).data("sort-column")===i.metaData.sortColumn});t.length>0?(this.metaData.sortDescending?this.sortToggle.removeClass("datagridview-sort-toggle-ascending").addClass("datagridview-sort-toggle-descending"):this.sortToggle.removeClass("datagridview-sort-toggle-descending").addClass("datagridview-sort-toggle-ascending"),t.append(this.sortToggle),this.sortToggle.show()):this.sortToggle.hide()};t.prototype.displayFooters=function(){let t=this,i=this.createElement("<div>","datagridview-footer",this.options.getFooterAttributes());this.footer.children().remove();this.footerPlugins.length!==0&&n.each(this.footerPlugins,function(){let n=t.createElement("<div>","datagridview-footer-element",t.options.getFooterElementAttributes());i.append(n);this(n,t.getMetaData(),t)});this.footer.replaceWith(i);this.footer=i};t.prototype.getColumns=function(){return this.options.columns.map(function(n){return{id:n.id,width:n.width,visible:n.visible,data:n.data,sortData:n.sortData,sortable:n.sortable,index:n.index,"class":n.class}})};t.prototype.getSelectedRows=function(){return this.body.find(".datagridview-row-selected")};t.prototype.getSelectedIndexes=function(){return this.getSelectedRows().map(function(){return n(this).index()}).get()};t.prototype.getSelectedData=function(){let n=this;return this.getSelectedIndexes().map(function(t){return n.data[t]})};t.prototype.alterSelection=function(n,t,i){let r=!1;if(i){let t=this.rows.not(n).filter(".datagridview-row-selected");t.length>0&&(r=!0,t.removeClass("datagridview-row-selected"))}t?n.length>0&&(r=!0,n.toggleClass("datagridview-row-selected")):(n=n.not(".datagridview-row-selected"),n.length>0&&(r=!0,n.addClass("datagridview-row-selected")));r&&this.element.trigger("datagridview.selectionChanged",[this.getSelectedData()])};t.prototype.setSelectedRows=function(t){let i=this.rows.filter(t);this.allowSelect||(i=n(!1));this.isMultiselect||(i=i.first());this.alterSelection(i,!1,!0)};t.prototype.setSelectedIndexes=function(n){let t=this.rows.filter(function(t){return n.filter(function(n){return n===t}).length>0});this.setSelectedRows(t)};t.prototype.setSelectedData=function(n){let t=[];this.data.forEach(function(i,r,u){n(i,r,u)&&t.push(r)});this.setSelectedIndexes(t)};t.prototype.initiatePaging=function(n,t){let i=new DataGridViewMetaData(this.metaData.sortColumn,this.metaData.sortDescending,this.metaData.totalRows,t||this.metaData.rowsPerPage,n);this.element.trigger("datagridview.paged",[i])};t.prototype.toggleColumnVisibility=function(n,t){let i=this.options.columns.filter(function(t){return t.id===n});i.length===1&&(t=t!==!1,t&&!i[0].visible&&(i[0].width=i[0].defaultWidth),i[0].visible=t,this.setColumnStyle())};let i={columnMoveStart:function(t){t.which!==1||n(t.target).hasClass("datagridview-header-drag")||(t.data.headerMoveState.position=t.pageX,t.data.headerMoveState.header=n(this).closest(".datagridview-header-cell"),t.data.headerMoveState.column=t.data.options.columns.filter(function(n){return n.id===t.data.headerMoveState.header.data("id")})[0],t.data.headerMoveState.draggingStart=!0)},columnMove:function(t){if(t.data.headerMoveState.draggingStart&&!(Math.abs(t.data.headerMoveState.position-t.pageX)<3)){let i=t.pageX-t.data.element.offset().left+t.data.contentContainer.scrollLeft();if(t.data.headerMoveState.indicator||(t.data.headerMoveState.indicator=t.data.createElement("<div>","datagridview-header-move-indicator",t.data.options.getHeaderMoveIndicatorAttributes()).hide(),t.data.headerMoveState.indicator.css("top",t.data.header.outerHeight(!0)+t.data.contentContainer.scrollTop()+"px"),t.data.contentContainer.append(t.data.headerMoveState.indicator)),t.data.headerMoveState.title||(t.data.headerMoveState.title=t.data.createElement("<div>","datagridview-header-move-title",t.data.options.getHeaderMoveTitleAttributes()).text(t.data.headerMoveState.column.header||t.data.headerMoveState.column.data),t.data.contentContainer.append(t.data.headerMoveState.title)),t.data.headerMoveState.dragging=!0,t.data.headerMoveState.title.css("top",t.pageY+5-t.data.element.offset().top+t.data.contentContainer.scrollTop()+"px"),t.data.headerMoveState.title.css("left",t.pageX+15-t.data.element.offset().left+"px"),i<t.data.headerMoveState.header.position().left)for(let r=t.data.headerMoveState.column.index;r>=0;r--){let u=t.data.headerCells.filter(function(){return n(this).data("id")==t.data.options.columns[r].id});if(i>u.position().left){t.data.headerMoveState.indicator.css("left",u.position().left+"px");t.data.headerMoveState.indicator.show();break}}else if(i>t.data.headerMoveState.header.position().left+t.data.headerMoveState.header.outerWidth(!0))for(let r=t.data.headerMoveState.column.index;r<t.data.options.columns.length;r++){let u=t.data.headerCells.filter(function(){return n(this).data("id")==t.data.options.columns[r].id});if(i<u.position().left+u.outerWidth(!0)){t.data.headerMoveState.indicator.css("left",u.position().left+u.outerWidth(!0)+"px");t.data.headerMoveState.indicator.show();break}}else t.data.headerMoveState.indicator.hide()}},columnMoveEnd:function(t){if(t.which!==1||!t.data.headerMoveState.dragging){t.data.headerMoveState.draggingStart=!1;return}let i=null,r=t.pageX-t.data.element.offset().left+t.data.contentContainer.scrollLeft();if(r<t.data.headerMoveState.header.position().left){for(let u=t.data.headerMoveState.column.index;u>=0;u--)if(i=t.data.headerCells.filter(function(){return n(this).data("id")==t.data.options.columns[u].id}),r>i.position().left)break}else if(r>t.data.headerMoveState.header.position().left+t.data.headerMoveState.header.outerWidth(!0))for(let u=t.data.headerMoveState.column.index;u<t.data.options.columns.length;u++)if(i=t.data.headerCells.filter(function(){return n(this).data("id")==t.data.options.columns[u].id}),r<i.position().left+i.outerWidth(!0))break;if(i){let n=t.data.options.columns.indexOf(t.data.headerMoveState.column),r=t.data.options.columns.indexOf(t.data.options.columns.filter(function(n){return n.id===i.data("id")})[0]),u=0;t.data.options.columns.splice(r,0,t.data.options.columns.splice(n,1)[0]);t.data.options.columns.forEach(function(n){n.index=u++});t.data.setColumnStyle();t.data.element.trigger("datagridview.columnMoved",[t.data.getColumns()])}n(t.data.headerMoveState.title).remove();t.data.headerMoveState.title=null;n(t.data.headerMoveState.indicator).remove();t.data.headerMoveState.indicator=null;t.data.headerMoveState.draggingStart=!1;t.data.headerMoveState.dragging=!1},sort:function(t){if(t.which===1&&!t.data.headerResizeState.dragging&&!t.data.headerMoveState.dragging){let i=t.data.getMetaData(),r=n(this).data("sort-column");i.sortColumn===r?i.sortDescending=!i.sortDescending:(i.sortColumn=r,i.sortDescending=!1);t.data.element.trigger("datagridview.sorted",[i])}},columnResizeStart:function(t){t.which===1&&(t.data.headerResizeState.dragging=!0,t.data.headerResizeState.position=t.pageX,t.data.headerResizeState.column=n(this).closest(t.data.headerCells).data("id"))},columnResize:function(t){if(t.data.headerResizeState.dragging){let u=Math.min(100,t.data.options.columns.filter(function(n){return n.visible}).reduce(function(n,t){return n+t.width},0)),i=(t.data.headerResizeState.position-t.pageX)/n(t.data.element).width()*u,r=t.data.options.columns.filter(function(n){return n.id===t.data.headerResizeState.column})[0];r.width-i<0&&(i=r.width);r.width-=i;t.data.setColumnStyle();t.data.headerResizeState.position=t.pageX}},columnResizeEnd:function(t){if(t.which===1){let i=t.data.options.columns.filter(function(n){return n.width<=0});i.length>0&&(n.each(i,function(){this.visible=!1}),t.data.setColumnStyle());t.data.element.trigger("datagridview.columnResized",[t.data.getColumns()]);t.data.headerResizeState.dragging=!1}},rowSelectStart:function(t){t.data.test="rowSelectStart";t.data.selectState.selecting=!0;t.data.selectState.dragElement=n(this);t.data.selectState.dragElement.addClass("datagridview-row-selecting")},rowSelect:function(n){if(n.data.selectState.selecting){n.data.selectState.dragging=!0;let t=n.data.rows.index(n.data.selectState.dragElement),i=n.data.rows.index(this),r=n.data.rows.slice(Math.min(t,i),Math.max(t,i)+1);n.data.rows.not(r).removeClass("datagridview-row-selecting");r.addClass("datagridview-row-selecting")}},rowSelectEnd:function(t){if(t.data.selectState.selecting){if(t.data.isMultiselect&&t.data.selectState.dragging&&t.data.selectState.dragElement){let n=t.data.rows.index(t.data.selectState.dragElement),i=t.data.rows.index(this);t.data.alterSelection(t.data.rows.slice(Math.min(n,i),Math.max(n,i)+1),!1,!t.ctrlKey)}else if(t.data.isMultiselect&&t.shiftKey&&t.data.selectState.extendElement){let n=t.data.rows.index(t.data.selectState.extendElement),i=t.data.rows.index(this);t.data.alterSelection(t.data.rows.slice(Math.min(n,i),Math.max(n,i)+1),!1,!t.ctrlKey)}else t.data.isMultiselect&&t.ctrlKey?(t.data.alterSelection(n(this),!0,!1),t.data.selectState.extendElement=n(this)):(t.data.alterSelection(n(this),!1,!0),t.data.selectState.extendElement=n(this));t.data.rows.removeClass("datagridview-row-selecting");t.data.selectState.dragElement=null;t.data.selectState.selecting=!1;t.data.selectState.dragging=!1}}}})(jQuery);DataGridViewMetaData.prototype.clone=function(){return new DataGridViewMetaData(this.sortColumn,this.sortDescending,this.totalRows,this.rowsPerPage,this.page)};