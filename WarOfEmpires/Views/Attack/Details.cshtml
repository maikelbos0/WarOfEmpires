@model WarOfEmpires.Models.Attacks.AttackDetailsViewModel

@{
    ViewBag.Title = $"Attack details";
}

<h2>Attack details</h2>

<div class="row">
    <div class="col-12 col-md-6 offset-md-3">
        <div class="form-group">
            <label>Attacker</label>
            @Html.ActionLink(Model.Attacker, "Details", "Player", new { id = Model.AttackerId }, new { @class = "form-control btn btn-secondary text-left" })
        </div>

        @if (Model.AttackerAllianceId.HasValue) {
            <div class="form-group">
                <label>Attacker alliance</label>
                @Html.ActionLink($"{Model.AttackerAllianceCode} - {Model.AttackerAllianceName}", "Details", "Alliance", new { id = Model.AttackerAllianceId }, new { @class = "form-control btn btn-secondary text-left" })
            </div>
        }

        <div class="form-group">
            <label>Defender</label>
            @Html.ActionLink(Model.Defender, "Details", "Player", new { id = Model.DefenderId }, new { @class = "form-control btn btn-secondary text-left" })
        </div>

        @if (Model.DefenderAllianceId.HasValue) {
            <div class="form-group">
                <label>Defender alliance</label>
                @Html.ActionLink($"{Model.DefenderAllianceCode} - {Model.DefenderAllianceName}", "Details", "Alliance", new { id = Model.DefenderAllianceId }, new { @class = "form-control btn btn-secondary text-left" })
            </div>
        }

        <div class="form-group">
            <label>Date</label>
            @Html.TextBox(nameof(Model.Date), Model.Date.ToString(StringFormat.Date), new { @class = "form-control", @readonly = "readonly" })
        </div>

        <div class="form-group">
            <label>Attack type</label>
            @Html.TextBox(nameof(Model.Type), Model.Type, new { @class = "form-control", @readonly = "readonly" })
        </div>

        <div class="form-group">
            <label>Number of turns</label>
            @Html.TextBox(nameof(Model.Turns), Model.Turns.ToString(StringFormat.Integer), new { @class = "form-control", @readonly = "readonly" })
        </div>

        <div class="form-group">
            <label>Result</label>
            @Html.TextBox(nameof(Model.Result), Model.Result, new { @class = "form-control", @readonly = "readonly" })
        </div>
    </div>
</div>


@foreach (var round in Model.Rounds) {
    <p>
        <strong>@round.Attacker</strong>'s @round.Troops.ToString(StringFormat.Integer) @round.TroopType charge at the enemy and attack for @round.Damage.ToString(StringFormat.Integer) damage.
        <strong>@round.MercenaryCasualties.ToString(StringFormat.Integer) mercenaries and @round.SoldierCasualties.ToString(StringFormat.Integer) soldiers</strong> die as a result.
    </p>
}

@if (@Model.Result == "Won" || @Model.Result == "Surrendered") {
    <p>
        <strong>
            @Model.Attacker's troops are victorious and take as tribute: @Html.DisplayFor(m => m.Resources)
        </strong>
    </p>
}
